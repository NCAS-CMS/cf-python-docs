
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>cf.Field.regridc &#8212; Documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cf.Field.regrids" href="cf.Field.regrids.html" />
    <link rel="prev" title="cf.Field.isscalar" href="../attribute/cf.Field.isscalar.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><b><a href="../index.html">cf 3.0.6</a></b></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf_data_model.html"><strong>CF data model</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>Tutorial</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html"><strong>Analysis</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation_rules.html"><strong>Aggregation rules</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Older releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../class.html"><strong>cf classes</strong></a><ul>
  <li><a href="../classes/cf.Field.html">cf.Field</a><ul>
      <li>Previous: <a href="../attribute/cf.Field.isscalar.html" title="previous chapter">cf.Field.isscalar</a></li>
      <li>Next: <a href="cf.Field.regrids.html" title="next chapter">cf.Field.regrids</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/method/cf.Field.regridc.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cf-field-regridc">
<h1>cf.Field.regridc<a class="headerlink" href="#cf-field-regridc" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="cf.Field.regridc">
<code class="descclassname">Field.</code><code class="descname">regridc</code><span class="sig-paren">(</span><em>dst</em>, <em>axes</em>, <em>method</em>, <em>use_src_mask=True</em>, <em>use_dst_mask=False</em>, <em>fracfield=False</em>, <em>axis_order=None</em>, <em>ignore_degenerate=True</em>, <em>inplace=False</em>, <em>i=False</em>, <em>_compute_field_mass=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cf-python/blob/v3.0.6/cf/field.py#L16449"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cf.Field.regridc" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the field with the specified Cartesian axes regridded onto a
new grid.</p>
<p>Between 1 and 3 dimensions may be regridded.</p>
<p>Regridding, also called remapping or interpolation, is the process
of changing the grid underneath field data values while preserving
the qualities of the original data.</p>
<p>The regridding method must be specified. First-order conservative
interpolation conserves the global spatial integral of the field,
but may not give approximations to the values as good as
(multi)linear interpolation. (Multi)linear interpolation is
available. The latter method is particular useful for cases when
the latitude and longitude coordinate cell boundaries are not
known nor inferrable. Higher order patch recovery is available as
an alternative to (multi)linear interpolation.  This typically
results in better approximations to values and derivatives
compared to the latter, but the weight matrix can be larger than
the bilinear matrix, which can be an issue when regridding close
to the memory limit on a machine. It is only available in
2D. Nearest neighbour interpolation is also available. Nearest
source to destination is particularly useful for regridding
integer fields such as land use.</p>
<p><strong>Metadata</strong></p>
<p>The field construct’s domain must have axes matching those
specified in <em>src_axes</em>. The same is true for the destination
grid, if it provided as part of another field. Optionally the axes
to use from the destination grid may be specified separately in
<em>dst_axes</em>.</p>
<p>The output field construct’s coordinate objects which span the
specified axes are replaced with those from the destination
grid. Any fields contained in coordinate reference objects will
also be regridded, if possible.</p>
<p><strong>Mask</strong></p>
<p>The data array mask of the field is automatically taken into
account, such that the regridded data array will be masked in
regions where the input data array is masked. By default the mask
of the destination grid is not taken into account. If the
destination field data has more dimensions than the number of axes
specified then, if used, its mask is taken from the 1-3
dimensional section of the data where the indices of all axes
other than X and Y are zero.</p>
<p><strong>Implementation</strong></p>
<p>The interpolation is carried by out using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ESMF</span></code> package - a
Python interface to the Earth System Modeling Framework (ESMF)
regridding utility.</p>
<p><strong>Logging</strong></p>
<p>Whether ESMF logging is enabled or not is determined by
<a class="reference internal" href="../function/cf.REGRID_LOGGING.html#cf.REGRID_LOGGING" title="cf.REGRID_LOGGING"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.REGRID_LOGGING</span></code></a>. If it is logging takes place after every
call. By default logging is disabled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt>dst: <a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></dt>
<dd><p class="first last">The field containing the new grid or a dictionary with the
axes specifiers as keys referencing dimension coordinates.
If dst is a field list the first field in the list is
used.</p>
</dd>
<dt>axes:</dt>
<dd><p class="first last">Select dimension coordinates from the source and
destination fields for regridding. See <a class="reference internal" href="cf.Field.axes.html#cf.Field.axes" title="cf.Field.axes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.Field.axes</span></code></a> TODO for
options for selecting specific axes. However, the number
of axes returned by <a class="reference internal" href="cf.Field.axes.html#cf.Field.axes" title="cf.Field.axes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.Field.axes</span></code></a> TODO must be the same as
the number of specifiers passed in.</p>
</dd>
<dt>method: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></dt>
<dd><p class="first">Specify the regridding method. The <em>method</em> parameter must be
one of:</p>
<blockquote class="last">
<div><table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>method</em></th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'bilinear'</span></code></td>
<td>(Multi)linear interpolation.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'patch'</span></code></td>
<td>Higher order patch recovery.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'conservative_1st'</span></code></td>
<td>First-order conservative regridding</td>
</tr>
<tr class="row-odd"><td>or <code class="docutils literal notranslate"><span class="pre">'conservative'</span></code></td>
<td>will be used (requires both of the
fields to have contiguous, non-
overlapping bounds).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'nearest_stod'</span></code></td>
<td>Nearest neighbor interpolation is
used where each destination point is
mapped to the closest source point</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'nearest_dtos'</span></code></td>
<td>Nearest neighbor interpolation is
used where each source point is
mapped to the closest destination
point. A given destination point may
receive input from multiple source
points, but no source point will map
to more than one destination point.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd>
<dt>use_src_mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first">For all methods other than ‘nearest_stod’, this must be
True as it does not make sense to set it to False. For the</p>
<p class="last">‘nearest_stod’ method if it is True then points in the
result that are nearest to a masked source point are
masked. Otherwise, if it is False, then these points are
interpolated to the nearest unmasked source points.</p>
</dd>
<dt>use_dst_mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">By default the mask of the data on the destination grid is
not taken into account when performing regridding. If this
option is set to True then it is.</p>
</dd>
<dt>fracfield: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If the method of regridding is conservative the fraction
of each destination grid cell involved in the regridding
is returned instead of the regridded data if this is
True. Otherwise this is ignored.</p>
</dd>
<dt>axis_order: sequence, optional</dt>
<dd><p class="first last">A sequence of items specifying dimension coordinates as
retrieved by the <a class="reference internal" href="cf.Field.dim.html#cf.Field.dim" title="cf.Field.dim"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dim</span></code></a> method. These determine the order
in which to iterate over the other axes of the field when
regridding slices. The slowest moving axis will be the
first one specified. Currently the regridding weights are
recalculated every time the mask of a slice changes with
respect to the previous one, so this option allows the
user to minimise how frequently the mask changes.</p>
</dd>
<dt>ignore_degenerate: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">True by default. Instructs ESMPy to ignore degenerate
cells when checking the grids for errors. Regridding will
proceed and degenerate cells will be skipped, not
producing a result, when set to True. Otherwise an error
will be produced if degenerate cells are found. This will
be present in the ESMPy log files if cf.REGRID_LOGGING is
set to True. As of ESMF 7.0.0 this only applies to
conservative regridding.  Other methods always skip
degenerate cells.</p>
</dd>
<dt>inplace: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then do the operation in-place and return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</dd>
<dt>i: deprecated at version 3.0.0</dt>
<dd><p class="first last">Use the <em>inplace</em> parameter instead.</p>
</dd>
<dt>_compute_field_mass: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt>
<dd><p class="first last">If this is a dictionary then the field masses of the
source and destination fields are computed and returned
within the dictionary. The keys of the dictionary
indicates the lat/long slice of the field and the
corresponding value is a tuple containing the source field
construct’s mass and the destination field construct’s
mass. The calculation is only done if conservative
regridding is being performed. This is for debugging
purposes.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a href="#id1"><span class="problematic" id="id2">`</span></a>None</dt>
<dd><p class="first last">The regridded field construct, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the operation
was in-place.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<p>Regrid the time axes of field <code class="docutils literal notranslate"><span class="pre">f</span></code> conservatively onto a grid
contained in field <code class="docutils literal notranslate"><span class="pre">g</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;conservative&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Regrid the T axis of field <code class="docutils literal notranslate"><span class="pre">f</span></code> conservatively onto the grid
specified in the dimension coordinate <code class="docutils literal notranslate"><span class="pre">t</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">regridc</span><span class="p">({</span><span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="n">t</span><span class="p">},</span> <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">),</span> <span class="s1">&#39;conservative_1st&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Regrid the T axis of field <code class="docutils literal notranslate"><span class="pre">f</span></code> using bilinear interpolation onto
a grid contained in field <code class="docutils literal notranslate"><span class="pre">g</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Regrid the X and Y axes of field <code class="docutils literal notranslate"><span class="pre">f</span></code> conservatively onto a grid
contained in field <code class="docutils literal notranslate"><span class="pre">g</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">),</span> <span class="s1">&#39;conservative_1st&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Regrid the X and T axes of field <code class="docutils literal notranslate"><span class="pre">f</span></code> conservatively onto a grid
contained in field <code class="docutils literal notranslate"><span class="pre">g</span></code> using the destination mask:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">),</span> <span class="n">use_dst_mask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019, David Hassell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/method/cf.Field.regridc.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>